jQuery(document).ready(function () {
  jQuery("body.o_web_client").prepend(
     '<div class="howl-iconpicker-outer"> <div class="howl-iconpicker-middle"><div class="howl-iconpicker"> <div class="howl-closebtn"></div> <div class="mx-2 my-2 "> <input type="text" class="search-icon-input" placeholder="eg:chart" /> </div> <div class="icons-container mid"></div> <div class="mx-2 py-2 d-flex"><button class="btn btn-primary howl-iconpicker-close w-100 mx-1">Select</button></div> </div> </div> </div>'
  ); 
  for (
    var amid = "view-dashboard calendar chart-line chart-histogram briefcase note account bank cart chart-histogram sitemap wallet inbox factory arrange-bring-forward content-paste layers content-save-all folder-multiple content-duplicate shape-octagon settings clipboard file thumbs-up-down shuffle truck cloud alarm bell alarm-panel format-indent-increase link-variant repeat book-multiple currency-usd",
    bmid = amid.split(" "),
    cmid = 0;
    cmid < bmid.length;
    cmid++
  )  
    jQuery(".howl-iconpicker .icons-container.mid").append('<p class="mid-get-icon-val" data-iclass='+bmid[cmid]+'><i class="i mdi-light:' + bmid[cmid] + '"></i><span></span></p>'); 
  jQuery(".search-icon-input").keyup(function () {
    var a = jQuery(this).val(),
    b = 0;
    jQuery(".howl-iconpicker .mid-get-icon-val").each(function () {
      jQuery(this).data('iclass').search(new RegExp(a, "i")) < 0
        ? jQuery(this).fadeOut()
        : (jQuery(this).show(), b++);
    });
  }),
    jQuery(".howl-iconpicker-close").click(function () {
      jQuery(".howl-iconpicker-outer").css("display", "none");
    }),
    jQuery(".howl-iconpicker").on("click", function (a) {
      a.stopPropagation();
    }),
    jQuery(".howl-iconpicker-outer").on("click", function () {
      jQuery(".howl-iconpicker-outer").css("display", "none");
    });
}),
  (function (amid) {
    amid.fn.midiconpicker = function (bmid) {
      amid(this).focusin(function () { 
        $(amid(".howl-iconpicker-outer")[0]).css("display", "table"),
        amid(".howl-iconpicker .mid-get-icon-val").removeClass("selectedicon"),
          (whichInputClass = amid(this).attr("class")),
          (whichInputId = amid(this).attr("id")),
          amid(".howl-iconpicker .mid-get-icon-val").on("click", function () {
            var cmid = amid(this).data('iclass');
            amid(".howl-iconpicker .mid-get-icon-val").removeClass("selectedicon"),
            amid(this).addClass("selectedicon"),
            amid(bmid).attr("class") == whichInputClass &&
            amid(bmid).attr("id") == whichInputId &&
            amid(bmid).val("i mdi-light:" + cmid).change();
            var event1 = new Event('input');
            amid(bmid)[0].dispatchEvent(event1);
            var event1 = new Event('change');
            amid(bmid)[0].dispatchEvent(event1);
            bmid.parent().find('i').attr('class','').addClass('i mdi-light:'+cmid);
          });
      });
    };
  })(jQuery);
